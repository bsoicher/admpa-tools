<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="robots" content="noindex" />

    <title>Mobile App / Configuration</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.6.7/jquery.timeago.min.js"></script>
    <script src="../lib/aem.js"></script>
</head>

<body>
    <main>
        <div class="container my-5">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-transparent p-0 h5">
                    <li class="breadcrumb-item"><a href="../index.html">ADMPA Web Tools</a></li>
                    <li class="breadcrumb-item"><a href="index.html">Mobile App</a></li>
                    <li class="breadcrumb-item" aria-current="page">Configuration &nbsp;<span class="badge badge-warning badge-pill">In Development</span></li>
                </ol>
            </nav>
     
            <!--<p>maple-en.json - <span id="enstatus">...</span></p>-->

            <div class="form-group row">
                <label for="version" class="col-sm-2 col-form-label">Latest version</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" id="version"/>
                </div>
            </div>

            <h2 class="h5">JSON</h2>

            <div class="form-group row my-1">
                <label for="api" class="col-sm-2 col-form-label">API path</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" id="api"/>
                </div>
            </div>

            <div class="form-group row my-1">
                <label for="resources" class="col-sm-2 col-form-label">Resources URL</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" id="resources"/>
                </div>
            </div>

            <div class="form-group row my-1">
                <label for="subscriptions" class="col-sm-2 col-form-label">Subscriptions URL</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control form-control-sm" id="subscriptions"/>
                </div>
            </div>

            <table class="table" id="buttons">
                <thead>
                    <tr>
                        <th>Size</th>
                        <th>English</th>
                        <th>French</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

        </div>
    </main>
    <script>

        var asset = 'https://www.canada.ca/content/dam/dnd-mdn/documents/json/mobile/caf-config.json'

        $.get(asset).done(function(data){
            console.log(data);

            $('#version').val(data.latest_app_version)
            $('#api').val(data.apiServer)

            $('#resources').val(data.resources.ip + data.resources.path)
            $('#subscriptions').val(data.subscriptions.ip + data.subscriptions.path)

            data.homeTab.buttons.forEach(function(obj, i){
                $('#buttons tbody').append('<tr><td>' + obj.size + '</td><td>' + obj.en.name + '</td><td>' + obj.fr.name + '</td></tr>')
            })

        })

    </script>
</body>

</html>